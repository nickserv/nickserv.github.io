<head>
<title>Collatz Conjecture</title>
</head>

<body>
<script type="text/javascript">
var n
var watched_n
var steps

function collatz()
{
	watched_n = document.collatz.number.value
	n = document.collatz.number.value
	document.collatz.log.value = ""
	steps = 0
	if(n < 1)
	{
		if(n)
			{document.collatz.log.value = "Error:\nInput cannot be 0,\nas it is less than 1."}
	}
	else
	{
		while(n > 1)
		{
			if(n%2 == 0)
			{
				add()
				n = n / 2
			}
			else
			{
				add()
				n = 3 * n + 1
			}
		}
		addFinal()
	}
}

function startup()
{
	document.collatz.number.focus()
	document.collatz.log.value = ""
}

function watchInput()
{
	if(watched_n != document.collatz.number.value)
	{collatz();}
}

function add()
{
	document.collatz.log.value = document.collatz.log.value + n + "\n"
	steps++
}
function addFinal()
{
	document.collatz.log.value = document.collatz.log.value + n
	document.collatz.log.value = "Steps: " + steps + "\n" + document.collatz.log.value
}
function checkIt(evt)
{
    evt = (evt) ? evt : window.event
    var charCode = (evt.which) ? evt.which : evt.keyCode
    if (charCode > 31 && (charCode < 48 || charCode > 57))
    {
        status = "This field accepts numbers only."
        return false
    }
    status = ""
    return true
}
</script>

</head>

<body onload="startup(); setInterval('watchInput()',10)" link="black" vlink="black" alink="blue"><div align="center"><form name="collatz" autocomplete="off">
<table border="3" style="-webkit-border-radius: 5px; -moz-border-radius: 5px;">
	<tr><td align="center" style="font-size:20;font-weight:bold;font-family:Arial;">
		<a href="http://en.wikipedia.org/wiki/Collatz_conjecture" target="_blank">Collatz Conjecture</a>
	</td></tr>
	<tr><td align="center">
		<input type="text" name="number" size="23" onkeypress="return checkIt(event)">
	</td></tr>
	<tr><td align="center">
		<textarea name="log" rows="30" cols="20" readonly="readonly" wrap="off"></textarea>
	</td></tr>
</table>
</form></div></body>